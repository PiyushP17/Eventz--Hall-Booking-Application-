package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class booking_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");

    session.removeAttribute("type");
    if(session.getAttribute("username") == null){
        response.sendRedirect("login.jsp");
    }

      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html lang=\"en\">\n");
      out.write("   <head>\n");
      out.write("      <script>\n");
      out.write("          if(performance.navigation.type == 2){\n");
      out.write("             location.reload(true);\n");
      out.write("         }\n");
      out.write("      </script>\n");
      out.write("      <title>Bootstrap Example</title>\n");
      out.write("      <meta charset=\"utf-8\">\n");
      out.write("      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n");
      out.write("      <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css\">\n");
      out.write("      <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\n");
      out.write("      <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js\"></script>\n");
      out.write("      <style>\n");
      out.write("         /* Remove the navbar's default rounded borders and increase the bottom margin */ \n");
      out.write("         .navbar {\n");
      out.write("         margin-bottom: 50px;\n");
      out.write("         border-radius: 0;\n");
      out.write("         }\n");
      out.write("         /* Remove the jumbotron's default bottom margin */ \n");
      out.write("         .jumbotron {\n");
      out.write("         margin-bottom: 0;\n");
      out.write("         }\n");
      out.write("         /* Add a gray background color and some padding to the footer */\n");
      out.write("         footer {\n");
      out.write("         background-color: #f2f2f2;\n");
      out.write("         padding: 25px;\n");
      out.write("         }\n");
      out.write("         .fixed_div\n");
      out.write("         {\n");
      out.write("         width:100%;\n");
      out.write("         height:800px;\n");
      out.write("         background-color:rgba(0,0,0,0.5);\n");
      out.write("         display:none;\n");
      out.write("         position:fixed;\n");
      out.write("         border:2px solid black;\n");
      out.write("         z-index:2;\n");
      out.write("         }\n");
      out.write("      </style>\n");
      out.write("   </head>\n");
      out.write("   <body onload=\"show_booking_dates();\">\n");
      out.write("      <div class=\"fixed_div\" id=\"fix_div\">\n");
      out.write("         <div style=\"padding:30px;margin:auto;margin-top:100px;border-radius:10%;background-color:white;height:auto;width:600px;border:12px solid green;\">\n");
      out.write("            <h4 style=\"color:brown\" id=\"result\">\n");
      out.write("                Enter Password to Book slot\n");
      out.write("            </h4>\n");
      out.write("            Userid : <input type=\"text\" id=\"userid\" class=\"form-control\" readonly />\n");
      out.write("            <br/>\n");
      out.write("            password : <input type=\"password\" id=\"password\" class=\"form-control\" required/>\n");
      out.write("            <br/>\n");
      out.write("            Hall Id  :<input type=\"text\" id=\"hallid\" class=\"form-control\" readonly/>\n");
      out.write("            <br/>\n");
      out.write("            Slot Id  :<input type=\"text\" id=\"slotid\" class=\"form-control\" readonly/>\n");
      out.write("            <br/>\n");
      out.write("            Date  :<input type=\"text\" id=\"date_booking\" class=\"form-control\" readonly/>\n");
      out.write("            <br/>\n");
      out.write("            <button onclick=\"call_book_final();\" class=\"btn btn-success\" id=\"btnmodal\">Done</button>\n");
      out.write("            <button onclick=\"closeit()\" class=\"btn btn-danger\" id=\"btnmodal\">Close</button>\n");
      out.write("         </div>\n");
      out.write("         <!--<div style=\"position:absolute;top:0px;right:0px;color:red;\">\n");
      out.write("            <button onclick=\"closeit();\">Close</button>\n");
      out.write("         </div>-->\n");
      out.write("      </div>\n");
      out.write("      <div class=\"fixed_div\" id=\"update_fix_div\">\n");
      out.write("         <div style=\"padding:30px;margin:auto;margin-top:100px;border-radius:10%;background-color:white;height:auto;width:600px;border:12px solid green;\">\n");
      out.write("            <h4 style=\"color:brown\" id=\"endresult\">\n");
      out.write("                Update Your Details Here\n");
      out.write("            </h4>\n");
      out.write("            User Id : <input type=\"text\" id=\"updateUser\" class=\"form-control\" readonly disabled/>\n");
      out.write("            <br/>\n");
      out.write("            Password : <input type=\"password\" id=\"updatePassword\" class=\"form-control\"/>\n");
      out.write("            <br/>\n");
      out.write("            Email<input type=\"email\" id=\"updateEmail\" class=\"form-control\"/>\n");
      out.write("            <br/>\n");
      out.write("            Security Question<input type=\"email\" id=\"updateSecq\" class=\"form-control\"/>\n");
      out.write("            <br/>\n");
      out.write("            Security Answer<input type=\"email\" id=\"updateAnswer\" class=\"form-control\"/>\n");
      out.write("            <br/>\n");
      out.write("            <button onclick=\"modify();\" class=\"btn btn-success\" id=\"btnUpdate\">Update</button>\n");
      out.write("            <button onclick=\"closeit()\" class=\"btn btn-danger\" id=\"btnClose\">Close</button>\n");
      out.write("         </div>\n");
      out.write("         <!--<div style=\"position:absolute;top:0px;right:0px;color:red;\">\n");
      out.write("            <button onclick=\"closeit();\">Close</button>\n");
      out.write("         </div>-->\n");
      out.write("      </div>\n");
      out.write("      <div class=\"jumbotron\" style=\"height:200px;\">\n");
      out.write("         <div class=\"container text-center\">\n");
      out.write("             <h1>Welcome ");
 out.print(session.getAttribute("username")); 
      out.write(" </h1>\n");
      out.write("            <p>Book hall here</p>\n");
      out.write("         </div>\n");
      out.write("      </div>\n");
      out.write("      <nav class=\"navbar navbar-inverse\" style=\"background-color:; margin-bottom:0; margin-top:0; border:2px solid white;\">\n");
      out.write("          <div class=\"container-fluid\">\n");
      out.write("            <ul class=\"nav navbar-nav\">\n");
      out.write("                <li><a href=\"\" disabled>Eventz</a></li>\n");
      out.write("                <li><a href=\"#here\" onclick=\"show_user_booking_detail()\" >My Bookings</a></li>\n");
      out.write("                <li><a href=\"#here\" onclick=\"get_hall_details()\">Gallery</a></li>\n");
      out.write("                <!--<li><a href=\"enquiry\">Enquiry</a></li>-->\n");
      out.write("            </ul>\n");
      out.write("            <ul class=\"nav navbar-nav navbar-right\">\n");
      out.write("                <li><a href=\"#\" onclick=\"update_User_Profile()\">Update Profile</a></li>\n");
      out.write("                <li><a href=\"Logout\">Logout</a></li>\n");
      out.write("            </ul>\n");
      out.write("          </div>\n");
      out.write("     </nav>\n");
      out.write("      <br/><br/>\n");
      out.write("      <div class=\"container\">\n");
      out.write("         <div class=\"row\">\n");
      out.write("            <div class=\"col-sm-12\">\n");
      out.write("               <div class=\"panel panel-primary\">\n");
      out.write("                  <div class=\"panel-heading\">Select Date to Book Hall</div>\n");
      out.write("                  <div class=\"panel-body\">\n");
      out.write("                     <div id=\"booking_details\" style=\"border:10px solid powderblue;border-radius:15px;padding:25px;padding-left:50px;\">\n");
      out.write("                     </div>\n");
      out.write("                     <br/>\n");
      out.write("                     <div id=\"show_hall\" style=\"display:none;border:10px solid powderblue;border-radius:15px;padding:25px;padding-left:50px;\">\n");
      out.write("                     </div><br/>\n");
      out.write("                     <div id =\"show_details\" style=\"display:none;border:10px solid powderblue;border-radius:15px;padding:25px;padding-left:50px;\"> \n");
      out.write("                     </div>\n");
      out.write("                     <span id=\"here\"></span>\n");
      out.write("                  <a>\n");
      out.write("                     <div class=\"panel-footer\">\n");
      out.write("                         <button class=\"btn btn-primary\" id=\"hidebtn2\"style=\"display:none;\"onclick=\"hide();\">\n");
      out.write("                             Hide Details\n");
      out.write("                         </button>\n");
      out.write("                     </div>\n");
      out.write("                  </a>\n");
      out.write("               </div>\n");
      out.write("            </div>\n");
      out.write("         </div>\n");
      out.write("      </div>\n");
      out.write("      <br>\n");
      out.write("      </div>\n");
      out.write("      <footer class=\"footer text-center\" style=\"background-color:#000000;color:#FFFFFF\">\n");
      out.write("          Copyright @ Netcom Computers\n");
      out.write("      </footer>\n");
      out.write("      <script>\n");
      out.write("         function get_hall_details()\n");
      out.write("         {\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\n");
      out.write("                            var childEle = document.createElement(\"button\");\n");
      out.write("                            childEle.className=\"btn btn-primary\";\n");
      out.write("                            childEle.setAttribute(\"id\",\"hidebtn\");\n");
      out.write("                            childEle.innerHTML = \"Hide Details\";\n");
      out.write("                            childEle.onclick = function(){document.getElementById(\"show_details\").style.display=\"none\";};\n");
      out.write("                            document.getElementById(\"show_details\").style.display=\"block\";\n");
      out.write("                            document.getElementById(\"show_details\").innerHTML = this.responseText;\n");
      out.write("                            document.getElementById(\"show_details\").appendChild(childEle);\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"GET\", \"image_gallery.html\", true);\n");
      out.write("         \t\n");
      out.write("         \txhttp.send();\n");
      out.write("         }\n");
      out.write("         function show_booking_dates()\n");
      out.write("         {\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\t\n");
      out.write("         \t\t\tdocument.getElementById(\"booking_details\").innerHTML =\n");
      out.write("         \t\t\tthis.responseText;\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"GET\", \"show_booking.jsp\", true);\n");
      out.write("         \txhttp.send();\n");
      out.write("         \n");
      out.write("         }\n");
      out.write("         function update_User_Profile() {\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\n");
      out.write("                            document.getElementById(\"update_fix_div\").style.display=\"block\";\n");
      out.write("                            var user = JSON.parse(this.responseText);\n");
      out.write("                            document.getElementById(\"updateUser\").value = user.username;\n");
      out.write("                            document.getElementById(\"updatePassword\").value = user.password;\n");
      out.write("                            document.getElementById(\"updateEmail\").value = user.email;\n");
      out.write("                            document.getElementById(\"updateSecq\").value = user.securityquestion;\n");
      out.write("                            document.getElementById(\"updateAnswer\").value = user.answer;\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"GET\", \"updateDetails.jsp\", true);\n");
      out.write("         \txhttp.send();\n");
      out.write("         \n");
      out.write("         }\n");
      out.write("         function modify()\n");
      out.write("         {\t\t\n");
      out.write("         \tvar parameter = \"username=\"+document.getElementById(\"updateUser\").value;\n");
      out.write("         \tparameter += \"&password=\"+document.getElementById(\"updatePassword\").value;\n");
      out.write("         \tparameter += \"&email=\"+document.getElementById(\"updateEmail\").value;\n");
      out.write("         \tparameter += \"&secq=\"+document.getElementById(\"updateSecq\").value;\n");
      out.write("         \tparameter += \"&ans=\"+document.getElementById(\"updateAnswer\").value;\n");
      out.write("         \t\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\t\n");
      out.write("         \t\t\tdocument.getElementById(\"endresult\").innerHTML =\n");
      out.write("         \t\t\tthis.responseText;\n");
      out.write("                                document.getElementById(\"updateUser\").disabled=\"true\";\n");
      out.write("                                document.getElementById(\"updatePassword\").disabled=\"true\";\n");
      out.write("                                document.getElementById(\"updateEmail\").disabled=\"true\";\n");
      out.write("                                document.getElementById(\"updateSecq\").disabled=\"true\";\n");
      out.write("                                document.getElementById(\"updateAnswer\").disabled=\"true\";\n");
      out.write("         \t\t\t/*document.getElementById(\"date_booking\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"hallid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"slotid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"userid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"password\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"btnmodal\").disabled=\"true\";*/\n");
      out.write("         \t\t\t\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"POST\", \"Update\", true);\n");
      out.write("         \txhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n");
      out.write("         \txhttp.send(parameter);\t\n");
      out.write("         }\n");
      out.write("         function show_user_booking_detail()\n");
      out.write("         {\n");
      out.write("         \tvar parameter=\"");
out.print(session.getAttribute("username"));
      out.write("\";\n");
      out.write("         \t\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\n");
      out.write("                            var childEle = document.createElement(\"button\");\n");
      out.write("                            childEle.className=\"btn btn-primary\";\n");
      out.write("                            childEle.setAttribute(\"id\",\"hidebtn\");\n");
      out.write("                            childEle.innerHTML = \"Hide Details\";\n");
      out.write("                            childEle.onclick = function(){document.getElementById(\"show_details\").style.display=\"none\";};\n");
      out.write("                            document.getElementById(\"show_details\").style.display=\"block\";\n");
      out.write("                            document.getElementById(\"show_details\").innerHTML = \"<h2>My Bookings</h2>\"+this.responseText;\n");
      out.write("                            document.getElementById(\"show_details\").appendChild(childEle);\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"GET\", \"get_user_booking_details.jsp?username=\"+parameter, true);\n");
      out.write("         \txhttp.send();\n");
      out.write("         }\n");
      out.write("         function book_now(a)\n");
      out.write("         {\n");
      out.write("         \tvar get_book_date = a.innerHTML;\n");
      out.write("         \t//alert(get_book_date);\n");
      out.write("         \tdocument.getElementById(\"show_hall\").style.display = \"block\";\n");
      out.write("         \tvar parameter = \"date=\"+get_book_date;\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\t\n");
      out.write("         \t\t\tdocument.getElementById(\"show_hall\").innerHTML =\n");
      out.write("         \t\t\tthis.responseText;\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"POST\", \"show_available_hall.jsp\", true);\n");
      out.write("         \txhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n");
      out.write("         \txhttp.send(parameter);\n");
      out.write("         \t\n");
      out.write("         }\n");
      out.write("         \n");
      out.write("         function book_final(a,b)\n");
      out.write("         {\n");
      out.write("         \t//in a there is button on which click event has occured, and b contains hall id\n");
      out.write("         \tdocument.getElementById(\"fix_div\").style.display=\"block\";\n");
      out.write("         \t//alert(a);\n");
      out.write("         \t//alert(b.id);\n");
      out.write("                document.getElementById(\"userid\").value=\"");
out.print(session.getAttribute("username"));
      out.write("\";\n");
      out.write("         \tdocument.getElementById(\"hallid\").value=b.id;\n");
      out.write("         \tdocument.getElementById(\"slotid\").value=a.innerHTML;\n");
      out.write("         \tdocument.getElementById(\"date_booking\").value=document.getElementById(\"date_of_booking\").innerHTML;\n");
      out.write("         \t\n");
      out.write("         }\n");
      out.write("         \n");
      out.write("         function closeit()\n");
      out.write("         {\n");
      out.write("         \tdocument.getElementById(\"fix_div\").style.display=\"none\";\n");
      out.write("         \tlocation.reload();\n");
      out.write("         }\n");
      out.write("         function hide()\n");
      out.write("         {\n");
      out.write("             document.getElementById(\"show_details\").style.display=\"none\";\n");
      out.write("             \n");
      out.write("         }\n");
      out.write("         function call_book_final()\n");
      out.write("         {\t\t\n");
      out.write("         \tvar parameter = \"date=\"+document.getElementById(\"date_booking\").value;\n");
      out.write("         \tparameter += \"&hallid=\"+document.getElementById(\"hallid\").value;\n");
      out.write("         \tparameter += \"&slotid=\"+document.getElementById(\"slotid\").value;\n");
      out.write("         \tparameter += \"&userid=\"+document.getElementById(\"userid\").value;\n");
      out.write("         \tparameter += \"&pass=\"+document.getElementById(\"password\").value;\n");
      out.write("         \t\n");
      out.write("         \tvar xhttp = new XMLHttpRequest();\n");
      out.write("         \txhttp.onreadystatechange = function()\n");
      out.write("         \t{\n");
      out.write("         \t\tif (this.readyState == 4 && this.status == 200) \n");
      out.write("         \t\t{\t\n");
      out.write("         \t\t\tdocument.getElementById(\"result\").innerHTML =\n");
      out.write("         \t\t\tthis.responseText;\n");
      out.write("         \t\t\t\n");
      out.write("         \t\t\t\n");
      out.write("         \t\t\tdocument.getElementById(\"date_booking\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"hallid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"slotid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"userid\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"password\").disabled=\"true\";\n");
      out.write("         \t\t\tdocument.getElementById(\"btnmodal\").disabled=\"true\";\n");
      out.write("         \t\t\t\n");
      out.write("         \t\t}\n");
      out.write("         \t};\n");
      out.write("         \txhttp.open(\"POST\", \"make_booking_entry.jsp\", true);\n");
      out.write("         \txhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n");
      out.write("         \txhttp.send(parameter);\t\n");
      out.write("         }\n");
      out.write("      </script>\n");
      out.write("   </body>\n");
      out.write("</html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
